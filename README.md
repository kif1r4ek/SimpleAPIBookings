# Hotel Booking API (FastAPI)

Backend-API –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–µ–ª–µ–π. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–∏—Å–∫ –æ—Ç–µ–ª–µ–π –∏ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤, —Å–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—Ä–æ–Ω—è–º–∏ —Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π –¥–∞—Ç, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ email –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Redis.

–£—á–µ–±–Ω—ã–π pet-–ø—Ä–æ–µ–∫—Ç (MVP) –Ω–∞ –±–∞–∑–µ FastAPI –∏ PostgreSQL.

---

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîç **–ü–æ–∏—Å–∫ –æ—Ç–µ–ª–µ–π –∏ –Ω–æ–º–µ—Ä–æ–≤**
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –Ω–æ–º–µ—Ä–æ–≤ –ø–æ –¥–∞—Ç–∞–º**
- üè® **–°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—Ä–æ–Ω—è–º–∏**
  - –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–∞—Ç –ø—Ä–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏
  - –æ—Ç–º–µ–Ω–∞ / –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –±—Ä–æ–Ω–µ–π
- üìß **Email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** —á–µ—Ä–µ–∑ SMTP (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –±—Ä–æ–Ω–∏)
- üß† **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ Redis (fastapi-cache2)
- üîê **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**
  - JWT-—Ç–æ–∫–µ–Ω—ã
  - –∑–∞—â–∏—Ç–∞ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- üß± **–ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î** —á–µ—Ä–µ–∑ Alembic
- ‚úÖ **–¢–µ—Å—Ç—ã** –Ω–∞ pytest / pytest-asyncio
- üß© **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**
  - —Å–ª–æ–∏ `routers / services / repositories`
  - –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —á–µ—Ä–µ–∑ **Pydantic v2 / pydantic-settings**

---

## –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

- **Python 3.x**
- **FastAPI**
- **PostgreSQL**
- **SQLAlchemy 2**
- **Alembic**
- **Redis** (–∫—ç—à)
- **Celery** (—Ñ–æ–Ω–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–¥–∞—á, –Ω–∞–ø—Ä–∏–º–µ—Ä, email)
- **Pydantic v2**, **pydantic-settings**
- **PyTest**, **pytest-asyncio**

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ 

```text
app/
  main.py               # —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è FastAPI –∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–æ—É—Ç–µ—Ä–æ–≤, —Å—Ç–∞—Ç–∏–∫–∏ –∏ –∫—ç—à–∞
  database.py           # –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –ë–î –∏ —Ñ–∞–±—Ä–∏–∫–∏ —Å–µ—Å—Å–∏–π
  config.py             # –∫–ª–∞—Å—Å Settings, –∑–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–∑ .env
  logger.py             # –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–æ–≥–≥–µ—Ä–∞
  admin/                # –æ–±—ä—è–≤–ª–µ–Ω–∏—è SQLAdmin‚Äë–ø–∞–Ω–µ–ª–µ–π
  models/
    users/              # –º–æ–¥–µ–ª–∏, —Å—Ö–µ–º—ã, —Å–µ—Ä–≤–∏—Å –∏ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    hotels/             # –º–æ–¥–µ–ª–∏ –æ—Ç–µ–ª–µ–π –∏ –∫–æ–º–Ω–∞—Ç, —Å—Ö–µ–º—ã, —Å–µ—Ä–≤–∏—Å—ã –∏ –º–∞—Ä—à—Ä—É—Ç—ã
    bookings/           # –º–æ–¥–µ–ª–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π, —Å—Ö–µ–º—ã, —Å–µ—Ä–≤–∏—Å –∏ –º–∞—Ä—à—Ä—É—Ç—ã
  frontend/
    templates/          # Jinja2‚Äë—à–∞–±–ª–æ–Ω—ã (hotels.html)
    static/             # —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã (css, js, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
    pages/router.py     # –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
    images/router.py    # –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –æ—Ç–µ–ª–µ–π
  tasks/
    tasks.py            # Celery‚Äë–∑–∞–¥–∞—á–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ email
    worker.py           # –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Celery –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Redis
    tests/              # —Ç–µ—Å—Ç—ã pytest
migrations/
  env.py                # –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Alembic
  versions/             # –º–∏–≥—Ä–∞—Ü–∏–∏
.env                    # —Ñ–∞–π–ª –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (–Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—Å—è)
           
```
# ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

git clone https://github.com/kif1r4ek/SimpleAPIBookings.git
cd SimpleAPIBookings


–°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```
python -m venv .venv
```
# Windows
```
.\.venv\Scripts\activate
```

# Linux/Mac
```
source .venv/bin/activate
```
```
pip install -r requirements.txt
```

# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ

–í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –µ–≥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ (—Å–º. –ø—Ä–∏–º–µ—Ä –Ω–∏–∂–µ). –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∑–∞–¥–∞–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL, Redis –∏ SMTP.

### –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏

```
alembic upgrade head
```

### –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

```
uvicorn app.main:app --reload
```

### –ó–∞–ø—É—Å—Ç–∏—Ç–µ Celery worker (–¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∏—Å–µ–º)

```
celery -A app.tasks.worker worker -l info
```

### (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ó–∞–ø—É—Å—Ç–∏—Ç–µ Flower –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∑–∞–¥–∞—á Celery

```
celery -A app.tasks.worker flower
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É http://localhost:8000/, –∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è ‚Äî http://localhost:8000/docs.

## üõ†Ô∏è –ü—Ä–∏–º–µ—Ä .env
```text
MODE=DEV
LOG_LEVEL=INFO

POSTGRES_HOST=localhost
POSTGRES_DB=postgres
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_PORT=5432

TEST_POSTGRES_HOST=localhost
TEST_POSTGRES_DB=test_booking_db
TEST_POSTGRES_USER=postgres
TEST_POSTGRES_PASSWORD=postgres
TEST_POSTGRES_PORT=5432

JWT_SECRET=your_jwt_secret
JWT_ALGORITHM=HS256

SMT_HOST=smtp.example.com
SMT_PORT=465
SMT_EMAIL=example@example.com
SMT_PASSWORD=your_email_password

REDIS_HOST=localhost
REDIS_PORT=6379
```
# üîç –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

### –ó–∞–ø—É—Å—Ç–∏—Ç–µ unit‚Äë –∏ async‚Äë—Ç–µ—Å—Ç—ã –∫–æ–º–∞–Ω–¥–æ–π:
```
pytest
```
## üìå –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –ø—É—Ç–∏ /admin –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏.

–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Å–Ω–∏–∂–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö.

–ú–∞—Ä—à—Ä—É—Ç—ã /pages/hotels –∏—Å–ø–æ–ª—å–∑—É—é—Ç Jinja2‚Äë—à–∞–±–ª–æ–Ω –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –æ—Ç–µ–ª–µ–π.

–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞: —É—á–µ–±–Ω—ã–π pet‚Äë–ø—Ä–æ–µ–∫—Ç (MVP). –ü—Ä–æ–µ–∫—Ç –º–æ–∂–Ω–æ —Ä–∞–∑–≤–∏–≤–∞—Ç—å, –¥–æ–±–∞–≤–ª—è—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –ø–æ —Ä–æ–ª—è–º, —É–ª—É—á—à–∞—è —Ç–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –∏ —Ä–∞—Å—à–∏—Ä—è—è –±–∏–∑–Ω–µ—Å‚Äë–ª–æ–≥–∏–∫—É. –õ—é–±—ã–µ –æ—Ç–∑—ã–≤—ã –∏ pull‚Äërequests –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è!